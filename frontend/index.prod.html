<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JAN Delivery</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <!-- Backend API base URL override for production hosting -->
    <meta name="jan-api-base" content="https://jan-delivery.onrender.com">
    <link rel="stylesheet" href="styles/main.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div id="app">
        <!-- Loading Screen -->
        <div id="loading-screen" class="loading-screen">
            <div class="loading-spinner"></div>
            <p>–ó–∞–≥—Ä—É–∂–∞–µ–º –≤–∫—É—Å–Ω–æ–µ –º–µ–Ω—é...</p>
        </div>

        <!-- Header -->
        <header id="header" class="header hidden">
            <div class="header-content">
                <h1><img src="assets/images/logo.svg" alt="JAN Delivery" class="logo" onerror="this.style.display='none'; this.nextElementSibling.style.display='inline';">
                    <span class="logo-fallback" style="display:none;">üçï</span> JAN Delivery</h1>
                <div class="user-info">
                    <span id="user-name"></span>
                </div>
            </div>
            <div class="cart-indicator" id="cart-indicator">
                <span class="cart-icon">üõí</span>
                <span class="cart-count" id="cart-count">0</span>
            </div>
        </header>

        <!-- Navigation -->
        <nav id="nav" class="nav hidden">
            <button class="nav-btn active" data-page="menu">üçΩÔ∏è –ú–µ–Ω—é</button>
            <button class="nav-btn" data-page="cart">üõí –ö–æ—Ä–∑–∏–Ω–∞</button>
            <button class="nav-btn" data-page="orders">üì¶ –ó–∞–∫–∞–∑—ã</button>
        </nav>

        <!-- Main Content -->
        <main id="main-content" class="main-content hidden">
            <!-- Menu Page -->
            <div id="menu-page" class="page active">
                <div class="categories-filter">
                    <button class="category-btn active" data-category="all">–í—Å–µ</button>
                </div>
                <div id="menu-items" class="menu-grid">
                    <!-- Menu items will be loaded here -->
                </div>
            </div>

            <!-- Cart Page -->
            <div id="cart-page" class="page">
                <div class="cart-header">
                    <h2>–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞</h2>
                    <button id="clear-cart" class="clear-btn">–û—á–∏—Å—Ç–∏—Ç—å</button>
                </div>
                <div id="cart-items" class="cart-items">
                    <!-- Cart items will be loaded here -->
                </div>
                <div id="cart-summary" class="cart-summary hidden">
                    <div class="summary-row">
                        <span>–°—É–º–º–∞ –∑–∞–∫–∞–∑–∞:</span>
                        <span id="subtotal">0‚ÇΩ</span>
                    </div>
                    <div class="summary-row">
                        <span>–î–æ—Å—Ç–∞–≤–∫–∞:</span>
                        <span id="delivery-cost">200‚ÇΩ</span>
                    </div>
                    <div class="summary-row total">
                        <span>–ò—Ç–æ–≥–æ:</span>
                        <span id="total">0‚ÇΩ</span>
                    </div>
                    <button id="checkout-btn" class="checkout-btn">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
                </div>
                <div id="cart-empty" class="cart-empty">
                    <div class="empty-icon">üõí</div>
                    <h3>–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</h3>
                    <p>–î–æ–±–∞–≤—å—Ç–µ –±–ª—é–¥–∞ –∏–∑ –º–µ–Ω—é</p>
                    <button class="nav-to-menu">–ü–µ—Ä–µ–π—Ç–∏ –∫ –º–µ–Ω—é</button>
                </div>
            </div>

            <!-- Orders Page -->
            <div id="orders-page" class="page">
                <h2>–ú–æ–∏ –∑–∞–∫–∞–∑—ã</h2>
                <div id="orders-list" class="orders-list">
                    <!-- Orders will be loaded here -->
                </div>
                <div id="orders-empty" class="orders-empty">
                    <div class="empty-icon">üì¶</div>
                    <h3>–ó–∞–∫–∞–∑–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç</h3>
                    <p>–°–¥–µ–ª–∞–π—Ç–µ –ø–µ—Ä–≤—ã–π –∑–∞–∫–∞–∑ –∏–∑ –Ω–∞—à–µ–≥–æ –º–µ–Ω—é</p>
                </div>
            </div>
        </main>

        <!-- Order Modal -->
        <div id="order-modal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h3>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label>–°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã</label>
                        <div>
                            <label style="margin-right:12px;">
                                <input type="radio" name="payment" id="payment-cash" value="cash" checked>
                                –ù–∞–ª–∏—á–Ω—ã–µ
                            </label>
                            <label>
                                <input type="radio" name="payment" id="payment-card" value="card">
                                –ö–∞—Ä—Ç–∞
                            </label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞</label>
                        <input type="tel" id="phone-input" placeholder="+7 (999) 123-45-67">
                    </div>
                    <div class="form-group">
                        <label>–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏</label>
                        <input type="text" id="address-input" placeholder="–ù–∞—á–Ω–∏—Ç–µ –≤–≤–æ–¥–∏—Ç—å –∞–¥—Ä–µ—Å...">
                        <button id="get-location" class="location-btn">üìç –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ</button>
                        <div id="zone-warning" style="display:none;color:var(--warning-color);margin-top:8px;">
                            –ê–¥—Ä–µ—Å –≤–Ω–µ –∑–æ–Ω—ã –¥–æ—Å—Ç–∞–≤–∫–∏. –í—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –≤ —Å–ø–∏—Å–æ–∫ –æ–∂–∏–¥–∞–Ω–∏—è.
                        </div>
                        <button id="waitlist-btn" style="display:none;margin-top:8px;" class="clear-btn">–í —Å–ø–∏—Å–æ–∫ –æ–∂–∏–¥–∞–Ω–∏—è</button>
                    </div>
                    <div class="form-group">
                        <label>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∑–∞–∫–∞–∑—É</label>
                        <textarea id="notes-input" placeholder="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–∂–µ–ª–∞–Ω–∏—è (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)"></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="confirm-order" class="confirm-btn">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∑–∞–∫–∞–∑</button>
                </div>
            </div>
        </div>

        <!-- Item Modal -->
        <div id="item-modal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <div id="item-details">
                        <!-- Item details will be loaded here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/config.js"></script>
    <script src="js/telegram.js"></script>
    <script src="js/api.js"></script>
    <script src="js/addressAutocomplete.js"></script>
    <script src="js/cart.js"></script>
    <script src="js/geolocationFix.js"></script>
    <script src="js/menu.js"></script>
    <script src="js/orders.js"></script>
    <script src="js/app.js"></script>
</body>
</html>