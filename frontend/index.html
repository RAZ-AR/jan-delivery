<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JAN Delivery</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <!-- Backend API base URL override for production hosting -->
    <meta name="jan-api-base" content="https://jan-delivery.onrender.com">
    <link rel="stylesheet" href="styles/main.css">
    <!-- Internationalization -->
    <script src="js/i18n.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div id="app">
        <!-- Loading Screen -->
        <div id="loading-screen" class="loading-screen">
            <div class="loading-spinner"></div>
            <p data-i18n="app.loading">–ó–∞–≥—Ä—É–∂–∞–µ–º –≤–∫—É—Å–Ω–æ–µ –º–µ–Ω—é...</p>
        </div>

        <!-- Header -->
        <header id="header" class="header hidden">
            <div class="header-content">
                <h1><img src="assets/images/jan logo.svg" alt="JAN Delivery" class="logo" onerror="this.style.display='none'; this.nextElementSibling.style.display='inline';">
                    <span class="logo-fallback" style="display:none;">üçï</span> <span data-i18n="header.title">JAN Delivery</span></h1>
                <div class="user-info">
                    <span id="user-name"></span>
                </div>
            </div>
            <div class="header-actions">
                <!-- Language Switcher -->
                <div class="language-selector">
                    <button class="language-btn active" data-lang="ru" title="–†—É—Å—Å–∫–∏–π">RU</button>
                    <button class="language-btn" data-lang="en" title="English">EN</button>
                    <button class="language-btn" data-lang="sr" title="–°—Ä–ø—Å–∫–∏">SR</button>
                </div>
                <div class="cart-indicator" id="cart-indicator">
                    <span class="cart-icon">üõí</span>
                    <span class="cart-count" id="cart-count">0</span>
                </div>
            </div>
        </header>

        <!-- Navigation -->
        <nav id="nav" class="nav hidden">
            <button class="nav-btn active" data-page="menu" data-i18n="nav.menu">üçΩÔ∏è –ú–µ–Ω—é</button>
            <button class="nav-btn" data-page="cart" data-i18n="nav.cart">üõí –ö–æ—Ä–∑–∏–Ω–∞</button>
            <button class="nav-btn" data-page="orders" data-i18n="nav.orders">üì¶ –ó–∞–∫–∞–∑—ã</button>
        </nav>

        <!-- Main Content -->
        <main id="main-content" class="main-content hidden">
            <!-- Menu Page -->
            <div id="menu-page" class="page active">
                <div class="categories-filter">
                    <button class="category-btn active" data-category="all" data-i18n="menu.categories.all">–í—Å–µ</button>
                </div>
                <div id="menu-items" class="menu-grid">
                    <!-- Menu items will be loaded here -->
                </div>
            </div>

            <!-- Cart Page -->
            <div id="cart-page" class="page">
                <div class="cart-header">
                    <h2 data-i18n="cart.title">–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞</h2>
                    <button id="clear-cart" class="clear-btn" data-i18n="cart.clear">–û—á–∏—Å—Ç–∏—Ç—å</button>
                </div>
                <div id="cart-items" class="cart-items">
                    <!-- Cart items will be loaded here -->
                </div>
                <div id="cart-summary" class="cart-summary hidden">
                    <div class="summary-row">
                        <span data-i18n="cart.subtotal">–°—É–º–º–∞ –∑–∞–∫–∞–∑–∞:</span>
                        <span id="subtotal">0‚ÇΩ</span>
                    </div>
                    <div class="summary-row">
                        <span data-i18n="cart.delivery">–î–æ—Å—Ç–∞–≤–∫–∞:</span>
                        <span id="delivery-cost">200‚ÇΩ</span>
                    </div>
                    <div class="summary-row total">
                        <span data-i18n="cart.total">–ò—Ç–æ–≥–æ:</span>
                        <span id="total">0‚ÇΩ</span>
                    </div>
                    <button id="checkout-btn" class="checkout-btn" data-i18n="cart.checkout">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
                </div>
                <div id="cart-empty" class="cart-empty">
                    <div class="empty-icon">üõí</div>
                    <h3 data-i18n="cart.empty">–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</h3>
                    <p data-i18n="cart.emptyText">–î–æ–±–∞–≤—å—Ç–µ –±–ª—é–¥–∞ –∏–∑ –º–µ–Ω—é</p>
                    <button class="nav-to-menu" data-i18n="nav.menu">–ü–µ—Ä–µ–π—Ç–∏ –∫ –º–µ–Ω—é</button>
                </div>
            </div>

            <!-- Orders Page -->
            <div id="orders-page" class="page">
                <h2 data-i18n="orders.title">–ú–æ–∏ –∑–∞–∫–∞–∑—ã</h2>
                <div id="orders-list" class="orders-list">
                    <!-- Orders will be loaded here -->
                </div>
                <div id="orders-empty" class="orders-empty">
                    <div class="empty-icon">üì¶</div>
                    <h3 data-i18n="orders.empty">–ó–∞–∫–∞–∑–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç</h3>
                    <p data-i18n="orders.emptyText">–°–¥–µ–ª–∞–π—Ç–µ –ø–µ—Ä–≤—ã–π –∑–∞–∫–∞–∑ –∏–∑ –Ω–∞—à–µ–≥–æ –º–µ–Ω—é</p>
                </div>
            </div>
        </main>

        <!-- Order Modal -->
        <div id="order-modal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 data-i18n="checkout.title">–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h3>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label data-i18n="checkout.payment">–°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã</label>
                        <div>
                            <label style="margin-right:12px;">
                                <input type="radio" name="payment" id="payment-cash" value="cash" checked>
                                <span data-i18n="checkout.cash">–ù–∞–ª–∏—á–Ω—ã–µ</span>
                            </label>
                            <label>
                                <input type="radio" name="payment" id="payment-card" value="card">
                                <span data-i18n="checkout.card">–ö–∞—Ä—Ç–∞</span>
                            </label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label data-i18n="checkout.phone">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
                        <input type="tel" id="phone-input" data-i18n-placeholder="checkout.phonePlaceholder" placeholder="+79092288988 –∏–ª–∏ +381123456789">
                    </div>
                    <div class="form-group">
                        <label data-i18n="checkout.address">–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏</label>
                        <input type="text" id="address-input" data-i18n-placeholder="checkout.addressPlaceholder" placeholder="–ù–∞—á–Ω–∏—Ç–µ –≤–≤–æ–¥–∏—Ç—å —É–ª–∏—Ü—É...">
                        <button id="get-location" class="location-btn" data-i18n="checkout.useLocation">üìç –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ</button>
                        <div class="address-details" style="display:flex;gap:12px;margin-top:8px;">
                            <div style="flex:1;">
                                <label style="font-size:12px;color:var(--tg-theme-hint-color);" data-i18n="checkout.house">–î–æ–º</label>
                                <input type="text" id="house-input" data-i18n-placeholder="checkout.housePlaceholder" placeholder="‚Ññ –¥–æ–º–∞" style="width:100%;padding:8px;border:1px solid var(--border-color);border-radius:6px;font-size:14px;">
                            </div>
                            <div style="flex:1;">
                                <label style="font-size:12px;color:var(--tg-theme-hint-color);" data-i18n="checkout.apartment">–ö–≤–∞—Ä—Ç–∏—Ä–∞</label>
                                <input type="text" id="apartment-input" data-i18n-placeholder="checkout.apartmentPlaceholder" placeholder="‚Ññ –∫–≤." style="width:100%;padding:8px;border:1px solid var(--border-color);border-radius:6px;font-size:14px;">
                            </div>
                        </div>
                        <div id="zone-warning" style="display:none;color:var(--warning-color);margin-top:8px;">
                            <span data-i18n="address.outOfZone">–ê–¥—Ä–µ—Å –≤–Ω–µ –∑–æ–Ω—ã –¥–æ—Å—Ç–∞–≤–∫–∏. –í—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –≤ —Å–ø–∏—Å–æ–∫ –æ–∂–∏–¥–∞–Ω–∏—è.</span>
                        </div>
                        <button id="waitlist-btn" style="display:none;margin-top:8px;" class="clear-btn" data-i18n="checkout.waitlist">–í —Å–ø–∏—Å–æ–∫ –æ–∂–∏–¥–∞–Ω–∏—è</button>
                    </div>
                    <div class="form-group">
                        <label data-i18n="checkout.notes">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∑–∞–∫–∞–∑—É</label>
                        <textarea id="notes-input" data-i18n-placeholder="checkout.notesPlaceholder" placeholder="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–∂–µ–ª–∞–Ω–∏—è (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)"></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="confirm-order" class="confirm-btn">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∑–∞–∫–∞–∑</button>
                </div>
            </div>
        </div>

        <!-- Item Modal -->
        <div id="item-modal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <div id="item-details">
                        <!-- Item details will be loaded here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/config.js"></script>
    <script src="js/telegram.js"></script>
    <script src="js/api.js"></script>
    <script src="js/addressAutocomplete.js"></script>
    <script src="js/cart.js"></script>
    <script src="js/geolocationFix.js"></script>
    <script src="js/menu.js"></script>
    <script src="js/orders.js"></script>
    <script src="js/app.js"></script>
</body>
</html>